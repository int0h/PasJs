function def(opts, obj){
	opts.flags = opts.flags === undefined ? 'ew' : opts.flags;
	var desc = {
		"enumerable": ~opts.flags.indexOf('e'),
		"configurable": ~opts.flags.indexOf('c')		
	};
	if (opts.gs){
		desc.get = opts.gs[0];
		desc.set = opts.gs[1];
	}else{
		desc.writable = ~opts.flags.indexOf('w');
		desc.value = opts.value;
	};
	Object.defineProperty(obj, opts.name, desc);
};

function defProp(opts, classFn){
	def(opts, classFn.prototype);
};

function cloneFieldMeta(obj){
	var cloned = {};
	cloned.type = obj.type;
	cloned.default = obj.default;
	return cloned;
};

function setMeta(opts, classFn){
	var name = opts.name;
	var fieldMeta = {};
	fieldMeta.type = opts.meta.type;
	if (opts.meta.hasOwnProperty("default")){
		fieldMeta.default = opts.meta.default;
	};	
	classFn.meta.fields[name] = fieldMeta;
};

exports.def = def;
exports.defProp = defProp;
exports.setMeta = setMeta;